% Suppress page numbers on page 1
\pagenumbering{gobble}

\usepackage{setspace}
\usepackage[skip=15pt plus1pt, indent=0pt]{parskip}

% Use George Duffner version of EBGaramond with contextual alternates (+calt ensures Q.long)
\setmainfont{EBGaramond}[
  Path=../Templates/EB-Garamond/otf/,
  Extension=.otf,
  UprightFont=*12-Regular,
  ItalicFont=*12-Italic,
  RawFeature=+calt,
]

% Lighter version of Garamond for dropcaps
\newfontfamily\cormorant{CormorantGaramond}[
  Path=../Templates/Cormorant-Garamond/,
  Extension=.ttf,
  UprightFont=*-Light,
  ItalicFont=*-Italic,
  BoldFont=*-Bold,
]

% Used for examples in instructions document
\newfontfamily\redacted{RedactedScript}[
  Path=../Templates/Redacted-Script/,
  Extension=.ttf,
  UprightFont=*-Regular,
  ItalicFont=*-Light,
  BoldFont=*-Bold,
]


%https://tex.stackexchange.com/questions/162584/preventing-floats-of-being-before-section
% Prevent floats from going 'backward'
%\usepackage{flafter}

\clubpenalty = 10000
\widowpenalty = 10000
\displaywidowpenalty = 10000

\newcommand{\BIG}{\fontsize{48}{48}\selectfont}

% Package to style the section headers
% https://tex.stackexchange.com/questions/381256/how-to-adjust-the-title-spacing-using-sectsty-package
\usepackage{sectsty}
\makeatletter
\renewcommand\section{\@startsection {section}{1}{\z@}%
      {-7ex \@plus -1ex \@minus -.2ex}%
      {12ex \@plus.2ex}%
      {\newpage\vspace*{-0.5in}\begin{center}\normalfont\BIG\SS@sectfont}}
\renewcommand\subsection{\@startsection{subsection}{2}{\z@}%
      {-2.5ex\@plus -1ex \@minus -.2ex}%
      {2.5ex \@plus .2ex}%
      {\normalfont\Large\itshape\SS@subsectfont}}
\renewcommand\subsubsection{\@startsection{subsubsection}{3}{\z@}%
      {-2.5ex\@plus -1ex \@minus -.2ex}%
      {2.5ex \@plus .2ex}%
      {\cormorant\large\bfseries\SS@subsectfont}}
\makeatother


% Center title
\usepackage{titling}
\pretitle{\linespread{1}\begin{center}\vspace{2cm}\Huge}

% Make spacing between list items smaller
% Used partopsep = -1ex to make the distance between body text and lists smaller
\usepackage{enumitem}
\setlist{topsep = -5pt,itemsep = -1ex, partopsep = -1ex, parsep = 1ex}

% Insert ornaments
\usepackage{adforn}

% Adjust spacing between table caption and table content
\usepackage{caption} 
\captionsetup[table]{skip=10pt}

% Enable tabbing to fixed level from start of line
% https://tex.stackexchange.com/questions/263765/tabbing-from-the-beginning-of-a-line
\usepackage{tabto}
\TabPositions{5em}


\usepackage{multicol}
\setlength{\columnsep}{30pt}


% Enable drop caps
\usepackage{lettrine}
\renewcommand{\LettrineFontHook}{\cormorant}

% Custom Q & A style drop caps
\newcommand{\Q}{\lettrine[lines=2,findent=0.42em,nindent=0em,lraise=.15]{Q}}
\newcommand{\A}{\lettrine[lines=2,findent=0.42em,nindent=0em,lraise=0.05,depth=0]{A}}

\definecolor{quotegray}{RGB}{107, 107, 107}
\definecolor{preamble-gray}{RGB}{54, 54, 54}


% Environment styling (e.g. quote, author name, preamble)
\renewenvironment{quote}{%
  \list{}{%
    \leftmargin0.2cm
    \rightmargin\leftmargin
  }
  \item\relax\color{preamble-gray}\itshape
}
{\endlist}

%https://tex.stackexchange.com/questions/24132/overline-outside-of-math-mode
\makeatletter
\newcommand*{\textoverline}[1]{$\overline{\hbox{\textbf{\cormorant{#1}}}}\m@th$}
\makeatother

\newenvironment{preamble}
{\itshape\color{preamble-gray}}
{}

\newenvironment{magazine-subtitle}
{\begin{center}\BIG\itshape\cormorant}
{\end{center}}

\newenvironment{author-name}
{\rule{\columnwidth}{1pt}\cormorant\bfseries}
{}


\newenvironment{references}
{\begin{singlespace}\scriptsize\setlength}
{\end{singlespace}}

\newenvironment{redacted-text}
{\begin{singlespace}\redacted}
{\end{singlespace}}


 
\usepackage{eso-pic}
\usepackage{graphicx}


\newcommand{\InsertBackgroundPicture}[1]{\AddToShipoutPictureBG*{%
  \put(0,0){%
   \parbox[b][\paperheight]{\paperwidth}{%
     \vfill
     \centering
     \includegraphics[width=\paperwidth,height=\paperheight,%
                      keepaspectratio]{#1}%
     \vfill
    }
  }
}
}



% TODO: Make author consistent distance from line

% Break long URLs in bibliography
%https://tex.stackexchange.com/questions/115690/urls-in-bibliography-latex-not-breaking-line-as-expected
% Did not work for Statistics Canada reference
%\usepackage{url}
%\def\UrlBreaks{\do\/\do-\do.}
%\usepackage{hyperref}
%usepackage{breakurl}
%\usepackage[breaklinks]{hyperref}

